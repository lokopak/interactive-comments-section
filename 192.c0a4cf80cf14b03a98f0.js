"use strict";(self.webpackChunkinteractive_comments_section=self.webpackChunkinteractive_comments_section||[]).push([[192],{192:(Hn,le,d)=>{d.r(le),d.d(le,{CommentsModule:()=>Rn,commentServiceFactory:()=>yt});var p=d(583),r=d(186),ue=d(402),Ct=d(574),ce=d(796),de=d(2),vt=d(555);function O(t,n){return new Ct.y(e=>{const o=t.length;if(0===o)return void e.complete();const i=new Array(o);let s=0,a=0;for(let l=0;l<o;l++){const c=(0,ue.D)(t[l]);let b=!1;e.add(c.subscribe({next:u=>{b||(b=!0,a++),i[l]=u},error:u=>e.error(u),complete:()=>{s++,(s===o||!b)&&(a===o&&e.next(n?n.reduce((u,jn,qn)=>(u[jn]=i[qn],u),{}):i),e.complete())}}))}})}let he=(()=>{class t{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),v=(()=>{class t extends he{}return t.\u0275fac=function(){let n;return function(o){return(n||(n=r.n5z(t)))(o||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const f=new r.OlP("NgValueAccessor"),bt={provide:f,useExisting:(0,r.Gpc)(()=>F),multi:!0},Dt=new r.OlP("CompositionEventMode");let F=(()=>{class t extends he{constructor(e,o,i){super(e,o),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Dt,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&r.NdJ("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[r._Bn([bt]),r.qOj]}),t})();const h=new r.OlP("NgValidators"),_=new r.OlP("NgAsyncValidators");function be(t){return null!=t}function Me(t){const n=(0,r.QGY)(t)?(0,ue.D)(t):t;return(0,r.CqO)(n),n}function De(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function we(t,n){return n.map(e=>e(t))}function Ee(t){return t.map(n=>function(t){return!t.validate}(n)?n:e=>n.validate(e))}function P(t){return null!=t?function(t){if(!t)return null;const n=t.filter(be);return 0==n.length?null:function(e){return De(we(e,n))}}(Ee(t)):null}function R(t){return null!=t?function(t){if(!t)return null;const n=t.filter(be);return 0==n.length?null:function(e){return function(...t){if(1===t.length){const n=t[0];if((0,ce.k)(n))return O(n,null);if((0,vt.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return O(e.map(o=>n[o]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return O(t=1===t.length&&(0,ce.k)(t[0])?t[0]:t,null).pipe((0,de.U)(e=>n(...e)))}return O(t,null)}(we(e,n).map(Me)).pipe((0,de.U)(De))}}(Ee(t)):null}function Ne(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function j(t){return t?Array.isArray(t)?t:[t]:[]}function N(t,n){return Array.isArray(t)?t.includes(n):t===n}function Ge(t,n){const e=j(n);return j(t).forEach(i=>{N(e,i)||e.push(i)}),e}function Te(t,n){return j(n).filter(e=>!N(t,e))}let ke=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=P(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=R(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,o){return!!this.control&&this.control.hasError(e,o)}getError(e,o){return this.control?this.control.getError(e,o):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),m=(()=>{class t extends ke{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=r.n5z(t)))(o||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class C extends ke{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Ie=(()=>{class t extends class{constructor(n){this._cd=n}is(n){var e,o,i;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===i?void 0:i[n])}}{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(C,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&r.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[r.qOj]}),t})();function M(t,n){(function(t,n){const e=function(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(Ne(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const o=function(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(Ne(o,n.asyncValidator)):"function"==typeof o&&t.setAsyncValidators([o]);const i=()=>t.updateValueAndValidity();T(n._rawValidators,i),T(n._rawAsyncValidators,i)})(t,n),n.valueAccessor.writeValue(t.value),function(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ue(t,n)})}(t,n),function(t,n){const e=(o,i)=>{n.valueAccessor.writeValue(o),i&&n.viewToModelUpdate(o)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ue(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function(t,n){if(n.valueAccessor.setDisabledState){const e=o=>{n.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function T(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Ue(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function B(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const D="VALID",I="INVALID",V="PENDING",w="DISABLED";function L(t){return(W(t)?t.validators:t)||null}function je(t){return Array.isArray(t)?P(t):t||null}function J(t,n){return(W(n)?n.asyncValidators:t)||null}function qe(t){return Array.isArray(t)?R(t):t||null}function W(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class z{constructor(n,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=je(this._rawValidators),this._composedAsyncValidatorFn=qe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===D}get invalid(){return this.status===I}get pending(){return this.status==V}get disabled(){return this.status===w}get enabled(){return this.status!==w}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=je(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=qe(n)}addValidators(n){this.setValidators(Ge(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Ge(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Te(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Te(n,this._rawAsyncValidators))}hasValidator(n){return N(this._rawValidators,n)}hasAsyncValidator(n){return N(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=V,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=w,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=D,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===D||this.status===V)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?w:D}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=V,this._hasOwnPendingAsyncValidator=!0;const e=Me(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let o=t;return n.forEach(i=>{o=o instanceof Q?o.controls.hasOwnProperty(i)?o.controls[i]:null:o instanceof Rt&&o.at(i)||null}),o}(this,n)}getError(n,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?w:this.errors?I:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(V)?V:this._anyControlsHaveStatus(I)?I:D}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){W(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class U extends z{constructor(n=null,e,o){super(L(e),J(o,e)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=null,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){B(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){B(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Q extends z{constructor(n,e,o){super(L(e),J(o,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,o={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,o={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((o,i)=>{o.reset(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,o)=>(n[o]=e instanceof U?e.value:e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&n(o,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const o=this.controls[e];if(this.contains(e)&&n(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,o)=>((e.enabled||this.disabled)&&(n[o]=e.value),n))}_reduceChildren(n,e){let o=n;return this._forEachChild((i,s)=>{o=e(o,i,s)}),o}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((e,o)=>{if(void 0===n[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class Rt extends z{constructor(n,e,o){super(L(e),J(o,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,o={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,o={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){this._checkAllValuesPresent(n),n.forEach((o,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((o,i)=>{this.at(i)&&this.at(i).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((o,i)=>{o.reset(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n instanceof U?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((e,o)=>{n(e,o)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((e,o)=>{if(void 0===n[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const Ht={provide:C,useExisting:(0,r.Gpc)(()=>K)},$e=(()=>Promise.resolve(null))();let K=(()=>{class t extends C{constructor(e,o,i,s){super(),this.control=new U,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=function(t,n){if(!n)return null;let e,o,i;return Array.isArray(n),n.forEach(s=>{s.constructor===F?e=s:function(t){return Object.getPrototypeOf(t.constructor)===v}(s)?o=s:i=s}),i||o||e||null}(0,s)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,n){return[...n.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){M(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){$e.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const o=e.isDisabled.currentValue,i=""===o||o&&"false"!==o;$e.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(m,9),r.Y36(h,10),r.Y36(_,10),r.Y36(f,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Ht]),r.qOj,r.TTD]}),t})(),Le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Le]]}),t})(),fn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[ct]}),t})();var dt=d(903),ht=d(202),mt=d(709),ae=d(345);class _n{constructor(n){this.notifier=n}call(n,e){const o=new yn(n),i=(0,ae.ft)(this.notifier,new ae.IY(o));return i&&!o.seenValue?(o.add(i),e.subscribe(o)):o}}class yn extends ae.Ds{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let A=(()=>{class t{getAll(){throw new Error("Method not implemented.")}get(e){throw new Error("Method not implemented.")}add(e,o,i){throw new Error("Method not implemented.")}update(e,o){throw new Error("Method not implemented.")}delete(e){throw new Error("Method not implemented.")}vote(e){throw new Error("Method not implemented.")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Cn_currentUser={image:{png:"assets/images/avatars/image-juliusomo.png",webp:"assets/images/avatars/image-juliusomo.webp"},username:"amyrobson"},vn=function(t){return{"content-box-replying":t}},Vn=function(t){return{"background-image":t}};let pt=(()=>{class t{constructor(e){this._commentsService=e,this.repied$=new r.vpe,this.content="",this._destroy$=new mt.xQ}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}send(){this._commentsService.add(this.currentUser,this.content,this.replyingTo).subscribe(e=>{this.content="",this.repied$.emit("success"===e.type)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(A))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comments-box"]],inputs:{currentUser:"currentUser",replyingTo:"replyingTo"},outputs:{repied$:"replied"},decls:7,vars:7,consts:[[1,"comment-box",3,"ngClass"],[1,"comment-user-avatar",3,"ngStyle"],[1,"input-area"],["name","content","rows","3","id","content","placeholder","Add a comment...",3,"ngModel","ngModelChange"],[1,"comment-tools",2,"float","right"],["type","button",1,"button","button-send",3,"click"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"textarea",3),r.NdJ("ngModelChange",function(s){return o.content=s}),r.qZA(),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"button",5),r.NdJ("click",function(){return o.send()}),r._uU(6,"Send"),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.Q6J("ngClass",r.VKq(3,vn,o.replyingTo)),r.xp6(1),r.Q6J("ngStyle",r.VKq(5,Vn,o.currentUser.image.png?"url("+o.currentUser.image.png+")":null)),r.xp6(2),r.Q6J("ngModel",o.content))},directives:[p.mk,p.PC,F,Ie,K],styles:["[_nghost-%COMP%]{display:block}"]}),t})(),An=(()=>{class t{transform(e,o){const a=(Date.now()-new Date(e).getTime())/1e3;let l=60;if(a<l)return"a few seconds ago";let c=l;if(l*=60,a<l){let u=Math.floor(a/c);return`${u} minute${u>1?"s":""} ago`}if(c=l,l*=24,a<l){let u=Math.floor(a/c);return`${u} hours${u>1?"s":""} ago`}if(c=l,l*=7,a<l){let u=Math.floor(a/c);return`${u} days${u>1?"s":""} ago`}if(c=l,l*=7,a<l){let u=Math.floor(a/c);return`${u} week${u>1?"s":""} ago`}if(c=l,l*=30,a<l){let u=Math.floor(a/c);return`${u} mounth${u>1?"s":""} ago`}c=l,l*=12;let b=Math.floor(a/c);return`${b} year${b>1?"s":""} ago`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"timeAgo",type:t,pure:!0}),t})();function bn(t,n){if(1&t&&(r.TgZ(0,"span",15),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.hij("@",e.comment.replyingTo,"")}}function Mn(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"button",16),r.NdJ("click",function(){return r.CHM(e),r.oxw().reply()}),r._UZ(1,"i",17),r._uU(2,"Reply"),r.qZA()}}function Dn(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",function(){return r.CHM(e),r.oxw().delete()}),r._UZ(1,"i",19),r._uU(2,"Delete"),r.qZA()}}function wn(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"button",20),r.NdJ("click",function(){return r.CHM(e),r.oxw().edit()}),r._UZ(1,"i",21),r._uU(2,"Edit"),r.qZA()}}function En(t,n){if(1&t&&r._UZ(0,"app-comment",25),2&t){const e=n.$implicit,o=r.oxw(2);r.Q6J("comment",e)("currentUser",o.currentUser)}}function On(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"app-comments-box",26),r.NdJ("replied",function(){return r.CHM(e),r.oxw(2).replied()}),r.qZA()}if(2&t){const e=r.oxw(2);r.Q6J("currentUser",e.currentUser)("replyingTo",e.comment)}}function Fn(t,n){if(1&t&&(r.TgZ(0,"div",22),r.YNc(1,En,1,2,"app-comment",23),r.YNc(2,On,1,2,"app-comments-box",24),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.comment.replies),r.xp6(1),r.Q6J("ngIf",e.replying)}}const Nn=function(t){return{"background-image":t}};let Sn=(()=>{class t{constructor(e){this._commentsService=e,this.replying=!1}ngOnInit(){console.log("comment",this.comment)}reply(){this.replying=!0}replied(){this.replying=!1}delete(){console.log("deleting")}edit(){console.log("editing")}vote(e){this.comment.score+=e,this.comment.score<0&&(this.comment.score=0)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(A))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comment"]],inputs:{comment:"comment",currentUser:"currentUser"},decls:24,vars:15,consts:[[1,"comment"],[1,"comment-header"],[1,"comment-user-avatar",3,"ngStyle"],[1,"comment-username"],[1,"comment-time"],[1,"comment-body"],["class","comment-reply-to",4,"ngIf"],["role","group","aria-label","Score it",1,"comment-score"],["type","button",1,"button","comment-score-btn",3,"click"],[1,"comment-score-text"],[1,"comment-tools"],["class","button button-reply","type","button",3,"click",4,"ngIf"],["class","button button-delete","type","button",3,"click",4,"ngIf"],["class","button button-edit","type","button",3,"click",4,"ngIf"],["class","comment-replies-container",4,"ngIf"],[1,"comment-reply-to"],["type","button",1,"button","button-reply",3,"click"],[1,"icon","reply"],["type","button",1,"button","button-delete",3,"click"],[1,"icon","delete"],["type","button",1,"button","button-edit",3,"click"],[1,"icon","edit"],[1,"comment-replies-container"],[3,"comment","currentUser",4,"ngFor","ngForOf"],[3,"currentUser","replyingTo","replied",4,"ngIf"],[3,"comment","currentUser"],[3,"currentUser","replyingTo","replied"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"div",2),r.TgZ(3,"span",3),r._uU(4),r.qZA(),r.TgZ(5,"span",4),r._uU(6),r.ALo(7,"timeAgo"),r.qZA(),r.qZA(),r.TgZ(8,"div",5),r.TgZ(9,"p"),r.YNc(10,bn,2,1,"span",6),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"div",7),r.TgZ(13,"button",8),r.NdJ("click",function(){return o.vote(1)}),r._uU(14,"+"),r.qZA(),r.TgZ(15,"span",9),r._uU(16),r.qZA(),r.TgZ(17,"button",8),r.NdJ("click",function(){return o.vote(-1)}),r._uU(18,"-"),r.qZA(),r.qZA(),r.TgZ(19,"div",10),r.YNc(20,Mn,3,0,"button",11),r.YNc(21,Dn,3,0,"button",12),r.YNc(22,wn,3,0,"button",13),r.qZA(),r.qZA(),r.YNc(23,Fn,3,2,"div",14)),2&e&&(r.uIk("id","comment-"+o.comment.id),r.xp6(2),r.Q6J("ngStyle",r.VKq(13,Nn,o.comment.user.image.png?"url("+o.comment.user.image.png+")":null)),r.xp6(2),r.Oqu(o.comment.user.username),r.xp6(2),r.Oqu(r.lcZ(7,11,o.comment.createdAt)),r.xp6(4),r.Q6J("ngIf",o.comment.replyingTo),r.xp6(1),r.hij(" ",o.comment.content," "),r.xp6(5),r.Oqu(o.comment.score),r.xp6(4),r.Q6J("ngIf",o.currentUser.username!==o.comment.user.username),r.xp6(1),r.Q6J("ngIf",o.currentUser.username===o.comment.user.username),r.xp6(1),r.Q6J("ngIf",o.currentUser.username===o.comment.user.username),r.xp6(1),r.Q6J("ngIf",o.comment.replies))},directives:[p.PC,p.O5,p.sg,t,pt],pipes:[An],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function xn(t,n){if(1&t&&r._UZ(0,"app-comment",3),2&t){const e=n.$implicit,o=r.oxw();r.Q6J("comment",e)("currentUser",o.currentUser)}}function Gn(t,n){if(1&t&&r._UZ(0,"app-comments-box",4),2&t){const e=r.oxw();r.Q6J("currentUser",e.currentUser)}}let Tn=(()=>{class t{constructor(){this.comments=[],this.currentUser=Cn_currentUser}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comments-container"]],inputs:{comments:"comments"},decls:3,vars:2,consts:[[1,"comments-container"],[3,"comment","currentUser",4,"ngFor","ngForOf"],[3,"currentUser",4,"ngIf"],[3,"comment","currentUser"],[3,"currentUser"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r.YNc(1,xn,1,2,"app-comment",1),r.YNc(2,Gn,1,1,"app-comments-box",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",o.comments),r.xp6(1),r.Q6J("ngIf",o.currentUser))},directives:[p.sg,p.O5,Sn,pt],styles:["[_nghost-%COMP%]{display:block}"]}),t})();const kn=[{path:"",component:(()=>{class t{constructor(e){this._commentsService=e,this.comments=[],this._destroy$=new mt.xQ,this.comments=[]}ngOnInit(){this._commentsService.getAll().pipe(function(t){return n=>n.lift(new _n(t))}(this._destroy$)).subscribe(e=>{e.items&&(this.comments=e.items)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(A))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comments"]],decls:2,vars:1,consts:[[1,"comments"],[3,"comments"]],template:function(e,o){1&e&&(r.TgZ(0,"section",0),r._UZ(1,"app-comments-container",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("comments",o.comments))},directives:[Tn],styles:["[_nghost-%COMP%]{display:block}"]}),t})()}];let Bn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[ht.Bz.forChild(kn)],ht.Bz]}),t})();var In=d(215),ft=d(917),Un=d(819);const gt="comments";let _t=(()=>{class t extends A{constructor(e){super(),this._subject=new In.X({items:[]}),this._currentId=0,this._comments=[],this._storage=e.localStorage;const o=this._storage.getItem(gt);null!==o&&(this._comments=JSON.parse(o));const i={items:this._comments};this._comments.forEach(s=>{s.id>this._currentId&&(this._currentId=s.id)}),this._subject.next(i)}generateContentId(){return++this._currentId}ngOnInit(){}getAll(){return this._subject.pipe((0,Un.B)())}get(e){const i={item:this._comments.find(s=>s.id===e)};return(0,ft.of)(i)}add(e,o,i){const s={id:this.generateContentId(),content:o,user:e,replies:[],createdAt:(0,p.p6)(Date.now(),"YYYY-MM-dd HH:mm:ss","en-EN"),score:0};if(i){console.log("comment",s,"repyto",i),s.replyingTo=i.user.username;const a=this._comments.find(l=>l.id==i.id);if(!a)throw new Error("Comment not found");a.replies.push(s)}else this._comments.push(s);return this._storage.setItem(gt,JSON.stringify(this._comments)),this._subject.next({items:this._comments}),(0,ft.of)({result:"success",comment:s})}update(e,o){throw new Error("Method not implemented.")}delete(e){throw new Error("Method not implemented.")}vote(e){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(dt.H))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Pn=(()=>{class t extends A{getAll(){throw new Error("Method not implemented.")}get(e){throw new Error("Method not implemented.")}add(e,o,i){throw new Error("Method not implemented.")}update(e,o){throw new Error("Method not implemented.")}delete(e){throw new Error("Method not implemented.")}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=r.n5z(t)))(o||t)}}(),t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function yt(t){return new _t(t)}let Rn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:A,useFactory:yt,deps:[dt.H]},_t,Pn],imports:[[p.ez,Bn,fn]]}),t})()}}]);