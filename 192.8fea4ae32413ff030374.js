"use strict";(self.webpackChunkinteractive_comments_section=self.webpackChunkinteractive_comments_section||[]).push([[192],{192:(eo,_e,u)=>{u.r(_e),u.d(_e,{CommentsModule:()=>Qn,commentServiceFactory:()=>Ot});var h=u(583),r=u(186),ye=u(402),Ft=u(574),Ce=u(796),ve=u(2),Nt=u(555);function N(t,n){return new Ft.y(e=>{const o=t.length;if(0===o)return void e.complete();const i=new Array(o);let s=0,a=0;for(let l=0;l<o;l++){const F=(0,ye.D)(t[l]);let ge=!1;e.add(F.subscribe({next:A=>{ge||(ge=!0,a++),i[l]=A},error:A=>e.error(A),complete:()=>{s++,(s===o||!ge)&&(a===o&&e.next(n?n.reduce((A,Xn,Kn)=>(A[Xn]=i[Kn],A),{}):i),e.complete())}}))}})}let Ve=(()=>{class t{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),y=(()=>{class t extends Ve{}return t.\u0275fac=function(){let n;return function(o){return(n||(n=r.n5z(t)))(o||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const m=new r.OlP("NgValueAccessor"),Tt={provide:m,useExisting:(0,r.Gpc)(()=>S),multi:!0},kt=new r.OlP("CompositionEventMode");let S=(()=>{class t extends Ve{constructor(e,o,i){super(e,o),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=(0,h.q)()?(0,h.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(kt,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&r.NdJ("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[r._Bn([Tt]),r.qOj]}),t})();const c=new r.OlP("NgValidators"),f=new r.OlP("NgAsyncValidators");function xe(t){return null!=t}function Te(t){const n=(0,r.QGY)(t)?(0,ye.D)(t):t;return(0,r.CqO)(n),n}function Ge(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function ke(t,n){return n.map(e=>e(t))}function Be(t){return t.map(n=>function(t){return!t.validate}(n)?n:e=>n.validate(e))}function Z(t){return null!=t?function(t){if(!t)return null;const n=t.filter(xe);return 0==n.length?null:function(e){return Ge(ke(e,n))}}(Be(t)):null}function L(t){return null!=t?function(t){if(!t)return null;const n=t.filter(xe);return 0==n.length?null:function(e){return function(...t){if(1===t.length){const n=t[0];if((0,Ce.k)(n))return N(n,null);if((0,Nt.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return N(e.map(o=>n[o]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return N(t=1===t.length&&(0,Ce.k)(t[0])?t[0]:t,null).pipe((0,ve.U)(e=>n(...e)))}return N(t,null)}(ke(e,n).map(Te)).pipe((0,ve.U)(Ge))}}(Be(t)):null}function Pe(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function J(t){return t?Array.isArray(t)?t:[t]:[]}function x(t,n){return Array.isArray(t)?t.includes(n):t===n}function qe(t,n){const e=J(n);return J(t).forEach(i=>{x(e,i)||e.push(i)}),e}function He(t,n){return J(n).filter(e=>!x(t,e))}let Ye=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Z(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=L(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,o){return!!this.control&&this.control.hasError(e,o)}getError(e,o){return this.control?this.control.getError(e,o):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),d=(()=>{class t extends Ye{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=r.n5z(t)))(o||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class _ extends Ye{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Le=(()=>{class t extends class{constructor(n){this._cd=n}is(n){var e,o,i;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===i?void 0:i[n])}}{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(_,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&r.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[r.qOj]}),t})();function b(t,n){(function(t,n){const e=function(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(Pe(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const o=function(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(Pe(o,n.asyncValidator)):"function"==typeof o&&t.setAsyncValidators([o]);const i=()=>t.updateValueAndValidity();B(n._rawValidators,i),B(n._rawAsyncValidators,i)})(t,n),n.valueAccessor.writeValue(t.value),function(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Je(t,n)})}(t,n),function(t,n){const e=(o,i)=>{n.valueAccessor.writeValue(o),i&&n.viewToModelUpdate(o)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Je(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function(t,n){if(n.valueAccessor.setDisabledState){const e=o=>{n.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function B(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Je(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function U(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const M="VALID",P="INVALID",v="PENDING",D="DISABLED";function K(t){return(te(t)?t.validators:t)||null}function ze(t){return Array.isArray(t)?Z(t):t||null}function ee(t,n){return(te(n)?n.asyncValidators:t)||null}function Qe(t){return Array.isArray(t)?L(t):t||null}function te(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ne{constructor(n,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=ze(this._rawValidators),this._composedAsyncValidatorFn=Qe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===M}get invalid(){return this.status===P}get pending(){return this.status==v}get disabled(){return this.status===D}get enabled(){return this.status!==D}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=ze(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=Qe(n)}addValidators(n){this.setValidators(qe(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(qe(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(He(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(He(n,this._rawAsyncValidators))}hasValidator(n){return x(this._rawValidators,n)}hasAsyncValidator(n){return x(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=v,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=D,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=M,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===M||this.status===v)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?D:M}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=v,this._hasOwnPendingAsyncValidator=!0;const e=Te(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let o=t;return n.forEach(i=>{o=o instanceof oe?o.controls.hasOwnProperty(i)?o.controls[i]:null:o instanceof zt&&o.at(i)||null}),o}(this,n)}getError(n,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?D:this.errors?P:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(v)?v:this._anyControlsHaveStatus(P)?P:M}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){te(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class R extends ne{constructor(n=null,e,o){super(K(e),ee(o,e)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=null,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){U(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){U(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class oe extends ne{constructor(n,e,o){super(K(e),ee(o,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,o={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,o={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((o,i)=>{o.reset(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,o)=>(n[o]=e instanceof R?e.value:e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&n(o,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const o=this.controls[e];if(this.contains(e)&&n(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,o)=>((e.enabled||this.disabled)&&(n[o]=e.value),n))}_reduceChildren(n,e){let o=n;return this._forEachChild((i,s)=>{o=e(o,i,s)}),o}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((e,o)=>{if(void 0===n[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class zt extends ne{constructor(n,e,o){super(K(e),ee(o,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,o={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,o={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){this._checkAllValuesPresent(n),n.forEach((o,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((o,i)=>{this.at(i)&&this.at(i).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((o,i)=>{o.reset(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n instanceof R?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((e,o)=>{n(e,o)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((e,o)=>{if(void 0===n[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const Kt={provide:_,useExisting:(0,r.Gpc)(()=>ie)},et=(()=>Promise.resolve(null))();let ie=(()=>{class t extends _{constructor(e,o,i,s){super(),this.control=new R,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=function(t,n){if(!n)return null;let e,o,i;return Array.isArray(n),n.forEach(s=>{s.constructor===S?e=s:function(t){return Object.getPrototypeOf(t.constructor)===y}(s)?o=s:i=s}),i||o||e||null}(0,s)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,n){return[...n.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){b(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){et.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const o=e.isDisabled.currentValue,i=""===o||o&&"false"!==o;et.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(d,9),r.Y36(c,10),r.Y36(f,10),r.Y36(m,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Kt]),r.qOj,r.TTD]}),t})(),nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),Ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[nt]]}),t})(),Dn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ct]}),t})();var vt=u(903),Vt=u(202),At=u(709),me=u(345);class wn{constructor(n){this.notifier=n}call(n,e){const o=new On(n),i=(0,me.ft)(this.notifier,new me.IY(o));return i&&!o.seenValue?(o.add(i),e.subscribe(o)):o}}class On extends me.Ds{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let V=(()=>{class t{getAll(){throw new Error("Method not implemented.")}get(e){throw new Error("Method not implemented.")}add(e,o,i){throw new Error("Method not implemented.")}update(e,o){throw new Error("Method not implemented.")}delete(e){throw new Error("Method not implemented.")}vote(e,o){throw new Error("Method not implemented.")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const w="comments",bt="YYYY-MM-dd HH:mm:ss",j=t=>{let n=Date.now()-t;return(0,h.p6)(n,bt,"en-EN")},Dt={currentUser:{image:{png:"assets/images/avatars/image-juliusomo.png",webp:"assets/images/avatars/image-juliusomo.webp"},username:"juliusomo"},comments:[{id:1,content:"Impressive! Though it seems the drag feature could be improved. But overall it looks incredible. You've nailed the design and the responsiveness at various breakpoints works really well.",createdAt:j(3024e6),score:12,user:{image:{png:"assets/images/avatars/image-amyrobson.png",webp:"assets/images/avatars/image-amyrobson.webp"},username:"amyrobson"},replies:[]},{id:2,content:"Woah, your project looks awesome! How long have you been coding for? I'm still new, but think I want to dive into React as well soon. Perhaps you can give me an insight on where I can learn React? Thanks!",createdAt:j(13824e5),score:5,user:{image:{png:"assets/images/avatars/image-maxblagun.png",webp:"assets/images/avatars/image-maxblagun.webp"},username:"maxblagun"},replies:[{id:3,content:"If you're still new, I'd recommend focusing on the fundamentals of HTML, CSS, and JS before considering React. It's very tempting to jump ahead but lay a solid foundation first.",createdAt:j(6912e5),score:4,replyingTo:"maxblagun",user:{image:{png:"assets/images/avatars/image-ramsesmiron.png",webp:"assets/images/avatars/image-ramsesmiron.webp"},username:"ramsesmiron"},replies:[]},{id:4,content:"I couldn't agree more with this. Everything moves so fast and it always seems like everyone knows the newest library/framework. But the fundamentals are what stay constant.",createdAt:j(864e5*2.3),score:2,replyingTo:"ramsesmiron",user:{image:{png:"assets/images/avatars/image-juliusomo.png",webp:"assets/images/avatars/image-juliusomo.webp"},username:"juliusomo"},replies:[]}]}]},Fn=function(t){return{"content-box-replying":t}},Nn=function(t){return{"background-image":t}};let Et=(()=>{class t{constructor(e){this._commentsService=e,this.repied$=new r.vpe,this.content="",this._destroy$=new At.xQ}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}send(){this._commentsService.add(this.currentUser,this.content,this.replyingTo).subscribe(e=>{this.content="",this.repied$.emit("success"===e.type)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(V))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comments-box"]],inputs:{currentUser:"currentUser",replyingTo:"replyingTo"},outputs:{repied$:"replied"},decls:7,vars:8,consts:[[1,"comment-box",3,"ngClass"],[1,"comment-user-avatar",3,"ngStyle"],[1,"input-area"],["name","content","rows","3","id","content","placeholder","Add a comment...",3,"ngModel","ngModelChange"],[1,"comment-tools",2,"float","right"],["type","button",1,"button","button-send",3,"disabled","click"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"textarea",3),r.NdJ("ngModelChange",function(s){return o.content=s}),r.qZA(),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"button",5),r.NdJ("click",function(){return o.send()}),r._uU(6,"Send"),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.Q6J("ngClass",r.VKq(4,Fn,o.replyingTo)),r.xp6(1),r.Q6J("ngStyle",r.VKq(6,Nn,o.currentUser.image.png?"url("+o.currentUser.image.png+")":null)),r.xp6(2),r.Q6J("ngModel",o.content),r.xp6(2),r.Q6J("disabled",0===o.content.length))},directives:[h.mk,h.PC,S,Le,ie],styles:["[_nghost-%COMP%]{display:block}"]}),t})();const q=6e4,H=60*q,O=24*H,pe=7*O,Y=365*O,fe=Y/12,xn=[[3e4,"just now"],[2*q,"1 minute ago"],[H,"minutes ago",q],[2*H,"1 hour ago"],[O,"hours ago",H],[2*O,"1 day ago"],[pe,"days ago",O],[2*pe,"1 week ago"],[fe,"weeks ago",pe],[2*fe,"1 month ago"],[Y,"months ago",fe],[2*Y,"1 year ago"],[Number.MAX_VALUE,"years ago",Y]];let Tn=(()=>{class t{transform(e,o){const a=Date.now()-new Date(e).getTime();for(let l of xn)if(a<l[0])return void 0===l[2]?l[1]:Math.floor(a/l[2])+" "+l[1]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"timeAgo",type:t,pure:!0}),t})();function Gn(t,n){if(1&t&&(r.TgZ(0,"span",15),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.hij("@",e.comment.replyingTo,"")}}function kn(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"button",16),r.NdJ("click",function(){return r.CHM(e),r.oxw().reply()}),r._UZ(1,"i",17),r._uU(2,"Reply"),r.qZA()}}function Bn(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",function(){return r.CHM(e),r.oxw().delete()}),r._UZ(1,"i",19),r._uU(2,"Delete"),r.qZA()}}function In(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"button",20),r.NdJ("click",function(){return r.CHM(e),r.oxw().edit()}),r._UZ(1,"i",21),r._uU(2,"Edit"),r.qZA()}}function Un(t,n){if(1&t&&r._UZ(0,"app-comment",25),2&t){const e=n.$implicit,o=r.oxw(2);r.Q6J("comment",e)("currentUser",o.currentUser)}}function Pn(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"app-comments-box",26),r.NdJ("replied",function(){return r.CHM(e),r.oxw(2).replied()}),r.qZA()}if(2&t){const e=r.oxw(2);r.Q6J("currentUser",e.currentUser)("replyingTo",e.comment)}}function Rn(t,n){if(1&t&&(r.TgZ(0,"div",22),r.YNc(1,Un,1,2,"app-comment",23),r.YNc(2,Pn,1,2,"app-comments-box",24),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.comment.replies),r.xp6(1),r.Q6J("ngIf",e.replying)}}const jn=function(t){return{"background-image":t}};let qn=(()=>{class t{constructor(e){this._commentsService=e,this.replying=!1}reply(){this.replying=!0}replied(){this.replying=!1}delete(){this._commentsService.delete(this.comment).subscribe(e=>{console.log(e)})}edit(){console.log("editing")}vote(e){this.currentUser.username!==this.comment.user.username&&this._commentsService.vote(this.comment,e).subscribe(o=>{console.log(o)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(V))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comment"]],inputs:{comment:"comment",currentUser:"currentUser"},decls:24,vars:15,consts:[[1,"comment"],[1,"comment-header"],[1,"comment-user-avatar",3,"ngStyle"],[1,"comment-username"],[1,"comment-time"],[1,"comment-body"],["class","comment-reply-to",4,"ngIf"],["role","group","aria-label","Score it",1,"comment-score"],["type","button",1,"button","comment-score-btn",3,"click"],[1,"comment-score-text"],[1,"comment-tools"],["class","button button-reply","type","button",3,"click",4,"ngIf"],["class","button button-delete","type","button",3,"click",4,"ngIf"],["class","button button-edit","type","button",3,"click",4,"ngIf"],["class","comment-replies-container",4,"ngIf"],[1,"comment-reply-to"],["type","button",1,"button","button-reply",3,"click"],[1,"icon","reply"],["type","button",1,"button","button-delete",3,"click"],[1,"icon","delete"],["type","button",1,"button","button-edit",3,"click"],[1,"icon","edit"],[1,"comment-replies-container"],[3,"comment","currentUser",4,"ngFor","ngForOf"],[3,"currentUser","replyingTo","replied",4,"ngIf"],[3,"comment","currentUser"],[3,"currentUser","replyingTo","replied"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"div",2),r.TgZ(3,"span",3),r._uU(4),r.qZA(),r.TgZ(5,"span",4),r._uU(6),r.ALo(7,"timeAgo"),r.qZA(),r.qZA(),r.TgZ(8,"div",5),r.TgZ(9,"p"),r.YNc(10,Gn,2,1,"span",6),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"div",7),r.TgZ(13,"button",8),r.NdJ("click",function(){return o.vote(1)}),r._uU(14,"+"),r.qZA(),r.TgZ(15,"span",9),r._uU(16),r.qZA(),r.TgZ(17,"button",8),r.NdJ("click",function(){return o.vote(-1)}),r._uU(18,"-"),r.qZA(),r.qZA(),r.TgZ(19,"div",10),r.YNc(20,kn,3,0,"button",11),r.YNc(21,Bn,3,0,"button",12),r.YNc(22,In,3,0,"button",13),r.qZA(),r.qZA(),r.YNc(23,Rn,3,2,"div",14)),2&e&&(r.uIk("id","comment-"+o.comment.id),r.xp6(2),r.Q6J("ngStyle",r.VKq(13,jn,o.comment.user.image.png?"url("+o.comment.user.image.png+")":null)),r.xp6(2),r.Oqu(o.comment.user.username),r.xp6(2),r.Oqu(r.lcZ(7,11,o.comment.createdAt)),r.xp6(4),r.Q6J("ngIf",o.comment.replyingTo),r.xp6(1),r.hij(" ",o.comment.content," "),r.xp6(5),r.Oqu(o.comment.score),r.xp6(4),r.Q6J("ngIf",o.currentUser.username!==o.comment.user.username),r.xp6(1),r.Q6J("ngIf",o.currentUser.username===o.comment.user.username),r.xp6(1),r.Q6J("ngIf",o.currentUser.username===o.comment.user.username),r.xp6(1),r.Q6J("ngIf",o.comment.replies))},directives:[h.PC,h.O5,h.sg,t,Et],pipes:[Tn],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function Hn(t,n){if(1&t&&r._UZ(0,"app-comment",3),2&t){const e=n.$implicit,o=r.oxw();r.Q6J("comment",e)("currentUser",o.currentUser)}}function Yn(t,n){if(1&t&&r._UZ(0,"app-comments-box",4),2&t){const e=r.oxw();r.Q6J("currentUser",e.currentUser)}}let Zn=(()=>{class t{constructor(){this.comments=[],this.currentUser=Dt.currentUser}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comments-container"]],inputs:{comments:"comments"},decls:3,vars:2,consts:[[1,"comments-container"],[3,"comment","currentUser",4,"ngFor","ngForOf"],[3,"currentUser",4,"ngIf"],[3,"comment","currentUser"],[3,"currentUser"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r.YNc(1,Hn,1,2,"app-comment",1),r.YNc(2,Yn,1,1,"app-comments-box",2),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",o.comments),r.xp6(1),r.Q6J("ngIf",o.currentUser))},directives:[h.sg,h.O5,qn,Et],styles:["[_nghost-%COMP%]{display:block}"]}),t})();const Ln=[{path:"",component:(()=>{class t{constructor(e){this._commentsService=e,this.comments=[],this._destroy$=new At.xQ,this.comments=[]}ngOnInit(){this._commentsService.getAll().pipe(function(t){return n=>n.lift(new wn(t))}(this._destroy$)).subscribe(e=>{e.items&&(this.comments=e.items)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(V))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-comments"]],decls:2,vars:1,consts:[[1,"comments"],[3,"comments"]],template:function(e,o){1&e&&(r.TgZ(0,"section",0),r._UZ(1,"app-comments-container",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("comments",o.comments))},directives:[Zn],styles:["[_nghost-%COMP%]{display:block}"]}),t})()}];let Jn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Vt.Bz.forChild(Ln)],Vt.Bz]}),t})();var $n=u(215),C=u(917),Wn=u(819);let wt=(()=>{class t extends V{constructor(e){super(),this._subject=new $n.X({items:[]}),this._currentId=0,this._comments=[],this._storage=e.localStorage;const o=this._storage.getItem(w);null!==o?this._comments=JSON.parse(o):(this._comments=Dt.comments,this._storage.setItem(w,JSON.stringify(this._comments)));const i={items:this._comments};this._comments.forEach(s=>{s.id>this._currentId&&(this._currentId=s.id)}),this._subject.next(i)}generateContentId(){return++this._currentId}getAll(){return this._subject.pipe((0,Wn.B)())}get(e){const i={item:this._comments.find(s=>s.id===e)};return(0,C.of)(i)}add(e,o,i){const s={id:this.generateContentId(),content:o,user:e,replies:[],createdAt:(0,h.p6)(Date.now(),bt,"en-EN"),score:0};if(i){s.replyingTo=i.user.username;const a=this._comments.find(l=>l.id==i.id);if(!a)return(0,C.of)({type:"error",message:"Comment not found"});a.replies.push(s)}else this._comments.push(s);return this._storage.setItem(w,JSON.stringify(this._comments)),this._subject.next({items:this._comments}),(0,C.of)({result:"success",comment:s})}update(e,o){throw new Error("Method not implemented.")}delete(e){let o=this._searchComment(e);return o.parent<0?(0,C.of)({type:"error",message:"Element not found"}):(o.child<0?this._comments.splice(o.parent,1):this._comments[o.parent].replies.splice(o.child,1),this._storage.setItem(w,JSON.stringify(this._comments)),this._subject.next({items:this._comments}),(0,C.of)({type:"success",message:"Element deleted successfully"}))}vote(e,o){const i=this._searchComment(e);return i.parent<0?(0,C.of)({type:"error",message:"Element not found"}):(i.child<0?this._comments[i.parent].score+=o:this._comments[i.parent].replies[i.child].score+=o,this._storage.setItem(w,JSON.stringify(this._comments)),this._subject.next({items:this._comments}),(0,C.of)({type:"success",message:"Element updated successfully"}))}_searchComment(e){let o={parent:-1,child:-1};if(e.replyingTo){let i;for(let s=0;s<this._comments.length;s++)if(this._comments[s].replies&&(i=this._comments[s].replies.indexOf(e),i>=0)){o={parent:s,child:i};break}}else o.parent=this._comments.indexOf(e);return o}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vt.H))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),zn=(()=>{class t extends V{getAll(){throw new Error("Method not implemented.")}get(e){throw new Error("Method not implemented.")}add(e,o,i){throw new Error("Method not implemented.")}update(e,o){throw new Error("Method not implemented.")}delete(e){throw new Error("Method not implemented.")}vote(e,o){throw new Error("Method not implemented.")}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=r.n5z(t)))(o||t)}}(),t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Ot(t){return new wt(t)}let Qn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:V,useFactory:Ot,deps:[vt.H]},wt,zn],imports:[[h.ez,Jn,Dn]]}),t})()}}]);